import{c as I,a as x,v as y,h as b,e as k,j as z}from"../../../../_app/immutable/chunks/index-ff400fad.js";import{W as P}from"../../../../_app/immutable/chunks/Window-e98aeb2f.js";import{h as q,z as M,r as S}from"../../../../_app/immutable/chunks/store-3e4ea696.js";import"../../../../_app/immutable/chunks/system-eda41220.js";import"short-uuid";import"../../../../_app/immutable/chunks/finder-762cc408.js";import"buffer";import{D as j}from"../../../../_app/immutable/chunks/DumbProgress-1d1763f5.js";import"../../../../_app/immutable/chunks/TitleBar-7840ae1a.js";import"lodash";import"idb-keyval";import"../../../../_app/immutable/chunks/index-2945f287.js";import"../../../../_app/immutable/chunks/ProgressBar-89c89d51.js";const U=I((u,t,e,H)=>{let m,h,w;m=x(q,o=>o),w=x(M,o=>h=o);let{id:d}=t,{window:a}=t,{self:r}=t,{parentNode:v}=t,{webapp:i}=t,D,{exec_path:l}=t,W,p=i?.background||"#ffffff";async function s(){S.update(o=>o.filter(g=>g!=r)),r.$destroy()}let f={width:document.querySelector("#work-space").offsetWidth,height:document.querySelector("#work-space").offsetHeight},{options:n={title:i.name,min_width:500,min_height:400,width:Math.min(f.width-20,(f.height-20)*1.6),height:Math.min(f.height-20),icon:i.icon,id:d,exec_path:l}}=t;function N(){setTimeout(()=>{},500)}t.id===void 0&&e.id&&d!==void 0&&e.id(d),t.window===void 0&&e.window&&a!==void 0&&e.window(a),t.self===void 0&&e.self&&r!==void 0&&e.self(r),t.parentNode===void 0&&e.parentNode&&v!==void 0&&e.parentNode(v),t.webapp===void 0&&e.webapp&&i!==void 0&&e.webapp(i),t.exec_path===void 0&&e.exec_path&&l!==void 0&&e.exec_path(l),t.destroy===void 0&&e.destroy&&s!==void 0&&e.destroy(s),t.options===void 0&&e.options&&n!==void 0&&e.options(n);let c,_;do c=!0,_=`${y(P,"Window").$$render(u,{options:n,on_click_close:s,on_focused:N,this:a},{this:o=>{a=o,c=!1}},{content:()=>`<div slot="content" class="absolute inset-0.5 top-0 flex flex-col bg-slate-800"><div class="absolute inset-0 overflow-auto bg-slate-100 font-sans"${b({"background-color":p})}>${`<div class="absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 text-slate-500 text-sm p-2 rounded font-mono">${y(j,"DumbProgress").$$render(u,{style:"width:150px;height:15px;"},{},{})}</div>`}

            
            <iframe class="${"w-full h-full "+k("hidden",!0)+" "+k(a?.z_index==h?"pointer-events-auto":"pointer-events-none",!0)}"${z("src",D,0)} allow="gamepad *;" frameborder="0" allowfullscreen${b({"background-color":p})}${z("this",W,0)}></iframe></div></div>`})}


`;while(!c);return m(),w(),_});export{U as default};
