import{c as P,a as _,v as n,k as W,n as j,h as L,i as O,f as R,e as g}from"../../../../_app/immutable/chunks/index-ff400fad.js";import{W as S}from"../../../../_app/immutable/chunks/Window-e98aeb2f.js";import{B as y}from"../../../../_app/immutable/chunks/Button-c9221fbd.js";import{T as U}from"../../../../_app/immutable/chunks/Tab-945f1ef4.js";import{h as q,w as b,r as A}from"../../../../_app/immutable/chunks/store-3e4ea696.js";import{get as C}from"idb-keyval";import E from"lodash";import{w as G}from"../../../../_app/immutable/chunks/system-eda41220.js";import"../../../../_app/immutable/chunks/TitleBar-7840ae1a.js";/* empty css                                                                             */import"../../../../_app/immutable/chunks/index-2945f287.js";const Z=P((r,l,t,J)=>{let s,x,w,u;x=_(q,e=>s=e),u=_(b,e=>w=e);let{id:c}=l,{window:a}=l,{self:d}=l,{exec_path:p}=l,f=w,k=s[G].children.filter(e=>s[e].type=="file"),D="Desktop";function o(){A.update(e=>e.filter(i=>i!=d)),d.$destroy()}async function B(){b.set(f),o()}let{options:v={title:"Display Properties",min_width:400,min_height:470,width:400,height:470,icon:null,id:c,resizable:!1,maximize_btn:!1,minimize_btn:!1,exec_path:p}}=l;async function T(e){let i=s[e];if(console.log(i),i.storage_type=="remote")return i.url;if(i.storage_type=="local"){let z=await C(i.url);return URL.createObjectURL(z)}}l.id===void 0&&t.id&&c!==void 0&&t.id(c),l.window===void 0&&t.window&&a!==void 0&&t.window(a),l.self===void 0&&t.self&&d!==void 0&&t.self(d),l.exec_path===void 0&&t.exec_path&&p!==void 0&&t.exec_path(p),l.destroy===void 0&&t.destroy&&o!==void 0&&t.destroy(o),l.options===void 0&&t.options&&v!==void 0&&t.options(v);let m,h;do m=!0,h=`${n(S,"Window").$$render(r,{options:v,on_click_close:o,this:a},{this:e=>{a=e,m=!1}},{content:()=>`<div slot="content" class="absolute inset-1 p-2 pb-1 flex flex-col bg-xp-yellow overflow-hidden">${n(U,"Tab").$$render(r,{size:"sm",items:["Themes","Desktop","Screesaver","Appearance","Settings"],selected:D},{},{})}
        <div class="w-full grow bg-[#fafaf9] shadow-sm -mt-[1px] flex flex-col overflow-hidden">${`<div class="h-[250px] shrink-0 relative"><div class="absolute top-8 left-1/2 -translate-x-1/2 w-[190px] h-[190px]"><div class="w-full h-full relative">${function(e){return W(e)?(e.then(null,j),`
                                <div class="absolute bg-cover" style="inset:10px 10px 30px 10px;"></div>
                            `):function(i){return` 
                                <div class="absolute bg-cover"${L(O("inset:10px 10px 30px 10px;",{"background-image":`url(${i})`}))}></div>
                            `}(e)}(T(f))}
                            <div class="absolute inset-0 bg-cover bg-[url(/images/xp/crt_monitor.png)]"></div></div></div></div>
                <div class="grow flex flex-row text-[13px] p-2 text-slate-800 overflow-hidden"><div class="grow flex flex-col overflow-hidden"><span class="my-1">Background</span>
                        <div class="grow p-1 overflow-y-scroll overflow-x-hidden border border-slate-700">${R(k,e=>`<div class="w-full flex flex-row"><img src="/images/xp/icons/JPG.png" class="w-[20px] h-[20px] shrink-0" alt="">
                                <p class="${"leading-[20px] ml-1 px-1 grow-0 line-clamp-1 "+g(E.isEqual(f,e)?"bg-blue-600 text-slate-50":"",!0)}">${g(s[e].basename)}</p>
                            </div>`)}</div></div></div>`}</div>
        <div class="shrink-0 flex flex-row justify-end items-center px-1 pt-2">${n(y,"Button").$$render(r,{title:"OK",style:"margin-right:10px;",on_click:B},{},{})}
            ${n(y,"Button").$$render(r,{title:"Cancel",on_click:o},{},{})}</div></div>`})}


`;while(!m);return x(),u(),h});export{Z as default};
