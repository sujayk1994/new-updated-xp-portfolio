import{S as L,i as Q,X as y,s as R,w as S,x as W,y as G,f as J,t as X,B as $,P as T,o as U,l as v,a as q,r as V,m as k,n as I,c as M,u as j,h as D,N as Y,p as m,b as Z,J as a,v as tt,_ as et}from"../../../chunks/index-59da92c8.js";import{W as it}from"../../../chunks/Window-6d40284c.js";import{B as st}from"../../../chunks/Button-5a8d2150.js";import{r as nt,h as rt}from"../../../chunks/store-fabc0359.js";import{j as ot,h as at,g as H}from"../../../chunks/utils-1f7a3290.js";import{b as K}from"../../../chunks/fs-94169c0b.js";import{D as lt}from"../../../chunks/DumbProgress-ba1b12c7.js";import"../../../chunks/TitleBar-a503be9c.js";import"../../../chunks/lodash-b0811ec1.js";import"../../../chunks/_commonjsHelpers-cea7ac1a.js";import"../../../chunks/index-355ed6be.js";/* empty css                                                           */import"../../../chunks/index-5377a032.js";import"../../../chunks/system-e72d84b7.js";import"../../../chunks/finder-f715ee8c.js";import"../../../chunks/admin-b2f51e94.js";import"../../../chunks/ProgressBar-a36ef5c0.js";function ct(o){let t,s,n,i,l,c,_,d,h,b,N,u,P,C,E,g,F,e,f,p;return g=new lt({props:{style:"height:15px;margin:5px 0;flex-shrink:0;"}}),f=new st({props:{title:"Cancel",on_click:o[2]}}),{c(){t=v("div"),s=v("div"),n=v("div"),i=v("img"),c=q(),_=v("p"),d=V("Copying "),h=V(o[3]),b=V("..."),N=q(),u=v("p"),P=V("From host to "),C=V(o[4]),E=q(),S(g.$$.fragment),F=q(),e=v("div"),S(f.$$.fragment),this.h()},l(r){t=k(r,"DIV",{slot:!0,class:!0});var w=I(t);s=k(w,"DIV",{class:!0});var z=I(s);n=k(z,"DIV",{class:!0});var x=I(n);i=k(x,"IMG",{src:!0,width:!0,height:!0,alt:!0,class:!0}),c=M(x),_=k(x,"P",{class:!0});var B=I(_);d=j(B,"Copying "),h=j(B,o[3]),b=j(B,"..."),B.forEach(D),N=M(x),u=k(x,"P",{class:!0});var O=I(u);P=j(O,"From host to "),C=j(O,o[4]),O.forEach(D),E=M(x),W(g.$$.fragment,x),x.forEach(D),F=M(z),e=k(z,"DIV",{class:!0});var A=I(e);W(f.$$.fragment,A),A.forEach(D),z.forEach(D),w.forEach(D),this.h()},h(){Y(i.src,l="/images/xp/copying.gif")||m(i,"src",l),m(i,"width","272"),m(i,"height","60"),m(i,"alt",""),m(i,"class","shrink-0"),m(_,"class","m-1 text-[12px] text-ellipsis line-clamp-1 h-4 shrink-0"),m(u,"class","m-1 text-[12px] text-ellipsis line-clamp-1 h-4 shrink-0"),m(n,"class","grow w-[270px] flex flex-col shrink-0 pr-1"),m(e,"class","flex flex-col justify-end w-[75px] shrink-0"),m(s,"class","absolute inset-2 flex flex-row overflow-hidden"),m(t,"slot","content"),m(t,"class","absolute inset-1 bg-xp-yellow")},m(r,w){Z(r,t,w),a(t,s),a(s,n),a(n,i),a(n,c),a(n,_),a(_,d),a(_,h),a(_,b),a(n,N),a(n,u),a(u,P),a(u,C),a(n,E),G(g,n,null),a(s,F),a(s,e),G(f,e,null),p=!0},p(r,w){(!p||w&8)&&tt(h,r[3])},i(r){p||(J(g.$$.fragment,r),J(f.$$.fragment,r),p=!0)},o(r){X(g.$$.fragment,r),X(f.$$.fragment,r),p=!1},d(r){r&&D(t),$(g),$(f)}}}function ft(o){let t,s,n={options:o[1],on_click_close:o[2],$$slots:{content:[ct]},$$scope:{ctx:o}};return t=new it({props:n}),o[11](t),{c(){S(t.$$.fragment)},l(i){W(t.$$.fragment,i)},m(i,l){G(t,i,l),s=!0},p(i,[l]){const c={};l&2&&(c.options=i[1]),l&32776&&(c.$$scope={dirty:l,ctx:i}),t.$set(c)},i(i){s||(J(t.$$.fragment,i),s=!0)},o(i){X(t.$$.fragment,i),s=!1},d(i){o[11](null),$(t,i)}}}function mt(o,t,s){let n;T(o,rt,e=>s(13,n=e));let{id:i}=t,{window:l}=t,{self:c}=t,{parentNode:_}=t,{copying_obj:d}=t,{target_folder_id:h}=t,{exec_path:b}=t,N=!1,u="",P=n[h].name,{options:C={title:"Copying",min_width:370,min_height:180,width:370,height:180,resizable:!1,minimize_btn:!1,maximize_btn:!1,id:i,exec_path:b}}=t;U(async()=>{if(d&&h){console.log(d);for(let e of Object.keys(d))console.log(e),await g(d[e],h,e);await E()}});async function E(){N=!0,nt.update(e=>e.filter(f=>f!=c)),c.$destroy()}async function g(e,f,p){if(!N)if(e instanceof File){s(3,u=e.name);let r=new File([e],e.name,{type:ot(e.name)||e.type});await K("file",H(p),at(p,H(p)),f,r)}else{let r=await K("folder","",p,f,null);for(let w of Object.keys(e))await g(e[w],r,w)}}function F(e){et[e?"unshift":"push"](()=>{l=e,s(0,l)})}return o.$$set=e=>{"id"in e&&s(5,i=e.id),"window"in e&&s(0,l=e.window),"self"in e&&s(6,c=e.self),"parentNode"in e&&s(7,_=e.parentNode),"copying_obj"in e&&s(8,d=e.copying_obj),"target_folder_id"in e&&s(9,h=e.target_folder_id),"exec_path"in e&&s(10,b=e.exec_path),"options"in e&&s(1,C=e.options)},[l,C,E,u,P,i,c,_,d,h,b,F]}class Pt extends L{constructor(t){super(),Q(this,t,mt,ft,R,{id:5,window:0,self:6,parentNode:7,copying_obj:8,target_folder_id:9,exec_path:10,options:1,destroy:2})}get id(){return this.$$.ctx[5]}set id(t){this.$$set({id:t}),y()}get window(){return this.$$.ctx[0]}set window(t){this.$$set({window:t}),y()}get self(){return this.$$.ctx[6]}set self(t){this.$$set({self:t}),y()}get parentNode(){return this.$$.ctx[7]}set parentNode(t){this.$$set({parentNode:t}),y()}get copying_obj(){return this.$$.ctx[8]}set copying_obj(t){this.$$set({copying_obj:t}),y()}get target_folder_id(){return this.$$.ctx[9]}set target_folder_id(t){this.$$set({target_folder_id:t}),y()}get exec_path(){return this.$$.ctx[10]}set exec_path(t){this.$$set({exec_path:t}),y()}get options(){return this.$$.ctx[1]}set options(t){this.$$set({options:t}),y()}get destroy(){return this.$$.ctx[2]}}export{Pt as default};
