import{S as Ye,i as Ze,s as $e,X as L,l as v,a as P,r as Q,m as k,n as w,h as u,c as T,u as X,p as c,q as G,b as W,J as i,O as R,a0 as Rt,v as et,E as Pe,U as Ce,R as Ot,K as ht,M as _t,_ as tt,w as ye,x as Ee,a2 as Oe,Q as gt,y as De,g as Nt,a8 as jt,aa as qt,d as Ut,f as ne,t as oe,B as Ie,P as Ht,V as At,a1 as Jt}from"./index-7043d62e.js";import{T as Kt}from"./TitleBar-43a93d4a.js";import"./lodash-b0811ec1.js";import{f as Qt,h as Xt,i as mt,e as Gt,d as Wt,m as Yt,a as Zt}from"./system-e72d84b7.js";import{t as $t,a as el,b as tl}from"./finder-63196e92.js";import{h as ll}from"./store-a53f3f11.js";import"./fs-359b7395.js";import{B as pt}from"./Button-4430907d.js";import{u as sl}from"./utils-1f7a3290.js";import{P as il}from"./Previewable-95faa8f2.js";import"./_commonjsHelpers-cea7ac1a.js";import"./index-bc59e2a0.js";import"./index-e9763cd9.js";import"./admin-093cca4c.js";/* empty css                                             */function bt(l,e,t){const s=l.slice();return s[13]=e[t],s[15]=t,s}function vt(l){let e,t=l[13].name+"",s,o,a=`${Ne}px`,f,r;function d(){return l[9](l[15])}return{c(){e=v("div"),s=Q(t),o=P(),this.h()},l(b){e=k(b,"DIV",{class:!0});var p=w(e);s=X(p,t),o=T(p),p.forEach(u),this.h()},h(){c(e,"class","box-border w-full flex flex-row p-0.5 pl-2 items-center hover:bg-blue-600 hover:text-slate-50 "+(l[15]!=0?"border-t":"")+" border-slate-300"),G(e,"height",a,!1)},m(b,p){W(b,e,p),i(e,s),i(e,o),f||(r=R(e,"click",d),f=!0)},p(b,p){l=b,p&2&&t!==(t=l[13].name+"")&&et(s,t)},d(b){b&&u(e),f=!1,r()}}}function kt(l){let e,t,s,o=`${Ne-2}px`,a,f;return{c(){e=v("div"),t=ht("svg"),s=ht("path"),this.h()},l(r){e=k(r,"DIV",{class:!0});var d=w(e);t=_t(d,"svg",{class:!0,xmlns:!0,viewBox:!0});var b=w(t);s=_t(b,"path",{d:!0}),w(s).forEach(u),b.forEach(u),d.forEach(u),this.h()},h(){c(s,"d","M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"),c(t,"class","w-full h-full fill-blue-700"),c(t,"xmlns","http://www.w3.org/2000/svg"),c(t,"viewBox","0 0 512 512"),c(e,"class","absolute right-[1px] top-[1px] bottom-[1px] p-1 rounded bg-blue-200 border-2 border-slate-50 box-border"),G(e,"width",o,!1)},m(r,d){W(r,e,d),i(e,t),i(t,s),a||(f=R(e,"click",l[7]),a=!0)},p:Pe,d(r){r&&u(e),a=!1,f()}}}function nl(l){let e,t,s,o=`${l[3]?Math.min(l[1].length*Ne,100):0}px`,a,f,r=l[1][l[0]]?.name+"",d,b,p,x,m=l[1],_=[];for(let D=0;D<m.length;D+=1)_[D]=vt(bt(l,m,D));let y=l[1].length>1&&kt(l);return{c(){e=v("div"),t=v("div");for(let D=0;D<_.length;D+=1)_[D].c();a=P(),f=v("div"),d=Q(r),b=P(),y&&y.c(),this.h()},l(D){e=k(D,"DIV",{class:!0,style:!0});var S=w(e);t=k(S,"DIV",{class:!0,style:!0});var g=w(t);for(let C=0;C<_.length;C+=1)_[C].l(g);g.forEach(u),a=T(S),f=k(S,"DIV",{class:!0});var F=w(f);d=X(F,r),F.forEach(u),b=T(S),y&&y.l(S),S.forEach(u),this.h()},h(){c(t,"class",s="absolute bg-slate-50 w-full left-0 max-h-[100px] overflow-y-auto box-content border border-slate-300 "+(l[3]?"block":"hidden")),c(t,"style",l[5]),G(t,"height",o,!1),c(f,"class","absolute inset-0 flex flex-row items-center pl-2"),c(e,"class","bg-slate-50 h-6 text-slate-800 border border-blue-300 p-1 text-[11px] absolute"),c(e,"style",l[2])},m(D,S){W(D,e,S),i(e,t);for(let g=0;g<_.length;g+=1)_[g].m(t,null);i(e,a),i(e,f),i(f,d),i(e,b),y&&y.m(e,null),l[10](e),p||(x=[R(f,"click",l[7]),Rt(l[6].call(null,e)),R(e,"click_outside",l[11])],p=!0)},p(D,[S]){if(S&11){m=D[1];let g;for(g=0;g<m.length;g+=1){const F=bt(D,m,g);_[g]?_[g].p(F,S):(_[g]=vt(F),_[g].c(),_[g].m(t,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=m.length}S&8&&s!==(s="absolute bg-slate-50 w-full left-0 max-h-[100px] overflow-y-auto box-content border border-slate-300 "+(D[3]?"block":"hidden"))&&c(t,"class",s),S&32&&c(t,"style",D[5]),S&10&&o!==(o=`${D[3]?Math.min(D[1].length*Ne,100):0}px`)&&G(t,"height",o,!1),S&3&&r!==(r=D[1][D[0]]?.name+"")&&et(d,r),D[1].length>1?y?y.p(D,S):(y=kt(D),y.c(),y.m(e,null)):y&&(y.d(1),y=null),S&4&&c(e,"style",D[2])},i:Pe,o:Pe,d(D){D&&u(e),Ce(_,D),y&&y.d(),l[10](null),p=!1,Ot(x)}}}let Ne=24;function ol(l,e,t){const{click_outside:s}=sl;let{items:o=[]}=e,{selected_index:a=0}=e,{style:f=""}=e,{direction:r}=e,d=!1,b,p="";function x(){m(),t(3,d=!0),console.log({expand:d})}function m(){r=="bottom"?t(5,p="top:100%;"):r=="top"?t(5,p="bottom:100%;"):document.body.offsetHeight-b.getBoundingClientRect().y>150?t(5,p="top:100%;"):t(5,p="bottom:100%;")}const _=S=>{t(0,a=S),t(3,d=!1)};function y(S){tt[S?"unshift":"push"](()=>{b=S,t(4,b)})}const D=()=>t(3,d=!1);return l.$$set=S=>{"items"in S&&t(1,o=S.items),"selected_index"in S&&t(0,a=S.selected_index),"style"in S&&t(2,f=S.style),"direction"in S&&t(8,r=S.direction)},[a,o,f,d,b,p,s,x,r,_,y,D]}class al extends Ye{constructor(e){super(),Ze(this,e,ol,nl,$e,{items:1,selected_index:0,style:2,direction:8})}get items(){return this.$$.ctx[1]}set items(e){this.$$set({items:e}),L()}get selected_index(){return this.$$.ctx[0]}set selected_index(e){this.$$set({selected_index:e}),L()}get style(){return this.$$.ctx[2]}set style(e){this.$$set({style:e}),L()}get direction(){return this.$$.ctx[8]}set direction(e){this.$$set({direction:e}),L()}}function wt(l,e,t){const s=l.slice();return s[28]=e[t],s}function xt(l,e,t){const s=l.slice();return s[28]=e[t],s}function yt(l,e,t){const s=l.slice();return s[28]=e[t],s}function Et(l,e,t){const s=l.slice();return s[28]=e[t],s}function rl(l){let e,t;return{c(){e=v("div"),this.h()},l(s){e=k(s,"DIV",{class:!0});var o=w(e);o.forEach(u),this.h()},h(){c(e,"class",t="w-[30px] h-[30px] shrink-0 bg-contain bg-no-repeat "+(l[28].type=="folder"?"bg-[url(/images/xp/icons/FolderClosed.png)]":"bg-[url(/images/xp/icons/Default.png)]")),G(e,"background-image",l[17](l[28]),!1)},m(s,o){W(s,e,o)},p(s,o){o[0]&2048&&t!==(t="w-[30px] h-[30px] shrink-0 bg-contain bg-no-repeat "+(s[28].type=="folder"?"bg-[url(/images/xp/icons/FolderClosed.png)]":"bg-[url(/images/xp/icons/Default.png)]"))&&c(e,"class",t),o[0]&2048&&G(e,"background-image",s[17](s[28]),!1)},i:Pe,o:Pe,d(s){s&&u(e)}}}function cl(l){let e,t;return e=new il({props:{size:30,default_icon:l[17](l[28]),fs_id:l[28].id}}),{c(){ye(e.$$.fragment)},l(s){Ee(e.$$.fragment,s)},m(s,o){De(e,s,o),t=!0},p(s,o){const a={};o[0]&2048&&(a.default_icon=s[17](s[28])),o[0]&2048&&(a.fs_id=s[28].id),e.$set(a)},i(s){t||(ne(e.$$.fragment,s),t=!0)},o(s){oe(e.$$.fragment,s),t=!1},d(s){Ie(e,s)}}}function Dt(l,e){let t,s,o,a,f,r,d=e[28].name+"",b,p,x,m,_,y,D;const S=[cl,rl],g=[];function F(U,E){return E[0]&2048&&(s=null),s==null&&(s=!!Gt.includes(U[28].ext)),s?0:1}o=F(e,[-1,-1]),a=g[o]=S[o](e);function C(){return e[19](e[28])}return{key:l,first:null,c(){t=v("div"),a.c(),f=P(),r=v("p"),b=Q(d),p=P(),this.h()},l(U){t=k(U,"DIV",{"fs-id":!0,class:!0});var E=w(t);a.l(E),f=T(E),r=k(E,"P",{class:!0});var I=w(r);b=X(I,d),I.forEach(u),p=T(E),E.forEach(u),this.h()},h(){c(r,"class","px-1 text-[11px] break-words line-clamp-2 text-ellipsis leading-tight"),c(t,"fs-id",x=e[28].id),c(t,"class",m="w-[100px] overflow-hidden m-2 inline-flex flex-row items-center font-MSSS relative "+(Mt(e[28])?"":"opacity-50")),this.first=t},m(U,E){W(U,t,E),g[o].m(t,null),i(t,f),i(t,r),i(r,b),i(t,p),_=!0,y||(D=R(t,"dblclick",C),y=!0)},p(U,E){e=U;let I=o;o=F(e,E),o===I?g[o].p(e,E):(Nt(),oe(g[I],1,1,()=>{g[I]=null}),Ut(),a=g[o],a?a.p(e,E):(a=g[o]=S[o](e),a.c()),ne(a,1),a.m(t,f)),(!_||E[0]&2048)&&d!==(d=e[28].name+"")&&et(b,d),(!_||E[0]&2048&&x!==(x=e[28].id))&&c(t,"fs-id",x),(!_||E[0]&2048&&m!==(m="w-[100px] overflow-hidden m-2 inline-flex flex-row items-center font-MSSS relative "+(Mt(e[28])?"":"opacity-50")))&&c(t,"class",m)},i(U){_||(ne(a),_=!0)},o(U){oe(a),_=!1},d(U){U&&u(t),g[o].d(),y=!1,D()}}}function It(l){let e,t,s,o,a=(l[28].display_name!=null?l[28].display_name:l[28].name)+"",f,r,d;function b(){return l[20](l[28])}return{c(){e=v("div"),t=v("div"),s=P(),o=v("div"),f=Q(a),this.h()},l(p){e=k(p,"DIV",{class:!0});var x=w(e);t=k(x,"DIV",{class:!0});var m=w(t);m.forEach(u),s=T(x),o=k(x,"DIV",{class:!0});var _=w(o);f=X(_,a),_.forEach(u),x.forEach(u),this.h()},h(){c(t,"class","w-[40px] h-[40px] shrink-0 bg-[url(/images/xp/icons/FolderClosed.png)] bg-contain"),G(t,"background-image",l[28].icon==null?"":`url(${l[28].icon})`,!1),c(o,"class","px-1 text-[11px] line-clamp-2 text-ellipsis leading-tight"),c(e,"class","w-[150px] ml-4 mr-8 overflow-hidden inline-flex flex-row items-center font-MSSS")},m(p,x){W(p,e,x),i(e,t),i(e,s),i(e,o),i(o,f),r||(d=R(e,"dblclick",b),r=!0)},p(p,x){l=p},d(p){p&&u(e),r=!1,d()}}}function Vt(l){let e,t,s,o,a=(l[28].display_name!=null?l[28].display_name:l[28].name)+"",f,r,d;function b(){return l[21](l[28])}return{c(){e=v("div"),t=v("div"),s=P(),o=v("div"),f=Q(a),this.h()},l(p){e=k(p,"DIV",{class:!0});var x=w(e);t=k(x,"DIV",{class:!0});var m=w(t);m.forEach(u),s=T(x),o=k(x,"DIV",{class:!0});var _=w(o);f=X(_,a),_.forEach(u),x.forEach(u),this.h()},h(){c(t,"class","w-[50px] h-[50px] shrink-0 bg-[url(/images/xp/icons/LocalDisk.png)] bg-contain"),c(o,"class","px-1 text-[11px] line-clamp-2 text-ellipsis leading-tight"),c(e,"class","w-[150px] ml-4 mr-8 overflow-hidden inline-flex flex-row items-center font-MSSS")},m(p,x){W(p,e,x),i(e,t),i(e,s),i(e,o),i(o,f),r||(d=R(e,"dblclick",b),r=!0)},p(p,x){l=p},d(p){p&&u(e),r=!1,d()}}}function St(l){let e,t,s,o,a=(l[28].display_name!=null?l[28].display_name:l[28].name)+"",f,r,d,b;function p(){return l[22](l[28])}return{c(){e=v("div"),t=v("div"),s=P(),o=v("div"),f=Q(a),r=P(),this.h()},l(x){e=k(x,"DIV",{class:!0});var m=w(e);t=k(m,"DIV",{class:!0});var _=w(t);_.forEach(u),s=T(m),o=k(m,"DIV",{class:!0});var y=w(o);f=X(y,a),y.forEach(u),r=T(m),m.forEach(u),this.h()},h(){c(t,"class","w-[50px] h-[50px] shrink-0 bg-[url(/images/xp/icons/RemovableMedia.png)] bg-contain"),c(o,"class","px-1 text-[11px] line-clamp-2 text-ellipsis leading-tight"),c(e,"class","w-[150px] ml-4 mr-8 overflow-hidden inline-flex flex-row items-center font-MSSS")},m(x,m){W(x,e,m),i(e,t),i(e,s),i(e,o),i(o,f),i(e,r),d||(b=R(e,"dblclick",p),d=!0)},p(x,m){l=x},d(x){x&&u(e),d=!1,b()}}}function fl(l){let e,t,s,o,a,f,r,d,b,p,x,m,_,y,D,S,g,F,C=[],U=new Map,E,I,O,N,K,Y,ae,le,h,J,Ue,Ve,Le,Te,ue,ze,Re,Se,je,qe,re,Z,he,He,Ae,_e,$,Je,ge,ce,Ke,ee,me,Qe,Xe,se,Ge,pe,fe,ie,We,lt,Me=l[11];const st=n=>n[28].id;for(let n=0;n<Me.length;n+=1){let V=Et(l,Me,n),B=st(V);U.set(B,C[n]=Dt(B,V))}let be=l[13].filter(Ct),j=[];for(let n=0;n<be.length;n+=1)j[n]=It(yt(l,be,n));let ve=l[13].filter(Pt),q=[];for(let n=0;n<ve.length;n+=1)q[n]=Vt(xt(l,ve,n));let ke=l[13].filter(Tt),H=[];for(let n=0;n<ke.length;n+=1)H[n]=St(wt(l,ke,n));ce=new pt({props:{title:"Save",on_click:l[6],disabled:l[1].length==0||l[0]==null}});let Lt={style:"left:100px;right:100px;bottom:5px;",items:l[4],selected_index:l[4].indexOf(l[3])>=0?l[4].indexOf(l[3]):0};return se=new al({props:Lt}),l[25](se),fe=new pt({props:{title:"Cancel",on_click:l[7]}}),{c(){e=v("div"),t=v("div"),s=v("div"),o=v("input"),a=P(),f=v("div"),d=P(),b=v("button"),x=P(),m=v("button"),y=P(),D=v("button"),g=P(),F=v("div");for(let n=0;n<C.length;n+=1)C[n].c();E=P(),I=v("div"),O=v("p"),N=Q("Files Stored on This Computer"),K=P(),Y=v("div"),ae=P();for(let n=0;n<j.length;n+=1)j[n].c();le=P(),h=v("p"),J=Q("Hard Disk Drives"),Ue=P(),Ve=v("div"),Le=P();for(let n=0;n<q.length;n+=1)q[n].c();Te=P(),ue=v("p"),ze=Q("Devices with Removable Storage"),Re=P(),Se=v("div"),je=P();for(let n=0;n<H.length;n+=1)H[n].c();qe=P(),re=v("div"),Z=v("div"),he=v("div"),He=Q("File name:"),Ae=P(),_e=v("div"),$=v("input"),Je=P(),ge=v("div"),ye(ce.$$.fragment),Ke=P(),ee=v("div"),me=v("div"),Qe=Q("Save as type:"),Xe=P(),ye(se.$$.fragment),Ge=P(),pe=v("div"),ye(fe.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var V=w(e);t=k(V,"DIV",{class:!0});var B=w(t);s=k(B,"DIV",{class:!0});var de=w(s);o=k(de,"INPUT",{class:!0,type:!0}),a=T(de),f=k(de,"DIV",{class:!0});var Be=w(f);Be.forEach(u),de.forEach(u),d=T(B),b=k(B,"BUTTON",{class:!0});var M=w(b);M.forEach(u),x=T(B),m=k(B,"BUTTON",{class:!0});var te=w(m);te.forEach(u),y=T(B),D=k(B,"BUTTON",{class:!0});var zt=w(D);zt.forEach(u),B.forEach(u),g=T(V),F=k(V,"DIV",{class:!0});var it=w(F);for(let A=0;A<C.length;A+=1)C[A].l(it);it.forEach(u),E=T(V),I=k(V,"DIV",{class:!0});var z=w(I);O=k(z,"P",{class:!0});var nt=w(O);N=X(nt,"Files Stored on This Computer"),nt.forEach(u),K=T(z),Y=k(z,"DIV",{class:!0}),w(Y).forEach(u),ae=T(z);for(let A=0;A<j.length;A+=1)j[A].l(z);le=T(z),h=k(z,"P",{class:!0});var ot=w(h);J=X(ot,"Hard Disk Drives"),ot.forEach(u),Ue=T(z),Ve=k(z,"DIV",{class:!0}),w(Ve).forEach(u),Le=T(z);for(let A=0;A<q.length;A+=1)q[A].l(z);Te=T(z),ue=k(z,"P",{class:!0});var at=w(ue);ze=X(at,"Devices with Removable Storage"),at.forEach(u),Re=T(z),Se=k(z,"DIV",{class:!0}),w(Se).forEach(u),je=T(z);for(let A=0;A<H.length;A+=1)H[A].l(z);z.forEach(u),qe=T(V),re=k(V,"DIV",{class:!0});var Fe=w(re);Z=k(Fe,"DIV",{class:!0});var we=w(Z);he=k(we,"DIV",{class:!0});var rt=w(he);He=X(rt,"File name:"),rt.forEach(u),Ae=T(we),_e=k(we,"DIV",{class:!0});var ct=w(_e);$=k(ct,"INPUT",{type:!0,class:!0}),ct.forEach(u),Je=T(we),ge=k(we,"DIV",{class:!0});var ft=w(ge);Ee(ce.$$.fragment,ft),ft.forEach(u),we.forEach(u),Ke=T(Fe),ee=k(Fe,"DIV",{class:!0});var xe=w(ee);me=k(xe,"DIV",{class:!0});var dt=w(me);Qe=X(dt,"Save as type:"),dt.forEach(u),Xe=T(xe),Ee(se.$$.fragment,xe),Ge=T(xe),pe=k(xe,"DIV",{class:!0});var ut=w(pe);Ee(fe.$$.fragment,ut),ut.forEach(u),xe.forEach(u),Fe.forEach(u),V.forEach(u),this.h()},h(){c(o,"class","absolute inset-0 w-[300px] pl-7 border border-blue-300 outline-none"),c(o,"type","text"),o.value=l[12],c(f,"class",r="w-[17px] h-[17px] absolute top-[4px] left-[4px] bg-no-repeat "+(l[0]==null?"bg-[url(/images/xp/icons/MyComputer.png)]":"bg-[url(/images/xp/icons/FolderClosed.png)]")+" bg-contain"),G(f,"background-image",l[17](l[10][l[0]]),!1),c(s,"class","h-full w-[300px] relative"),c(b,"class","mx-1.5 ml-4 w-4 h-4 bg-[url(/images/xp/icons/Back.png)] bg-contain disabled:grayscale"),b.disabled=p=l[9]==0,c(m,"class","mx-1.5 w-4 h-4 bg-[url(/images/xp/icons/Forward.png)] bg-contain disabled:grayscale"),m.disabled=_=l[9]==l[8].length-1,c(D,"class","mx-1.5 w-5 h-5 bg-[url(/images/xp/icons/Up.png)] bg-contain disabled:grayscale"),D.disabled=S=l[8][l[9]]==null,c(t,"class","absolute inset-1 top-0.5 h-6 mb-2 flex flex-row items-center text-[11px]"),c(F,"class","absolute top-7 left-1 right-1 h-[360px] overflow-auto bg-slate-50 border border-blue-300"),Oe(F,"hidden",l[0]==null),c(O,"class","ml-2 mt-0.5 font-MSSS text-black text-[11px] font-bold"),c(Y,"class","mb-4 w-[300px] h-[2px] bg-gradient-to-r from-blue-500 to-slate-50"),c(h,"class","ml-2 mt-4 font-MSSS text-black text-[11px] font-bold"),c(Ve,"class","mb-4 w-[300px] h-[2px] bg-gradient-to-r from-blue-500 to-slate-50"),c(ue,"class","ml-2 mt-4 font-MSSS text-black text-[11px] font-bold"),c(Se,"class","mb-4 w-[300px] h-[2px] bg-gradient-to-r from-blue-500 to-slate-50"),c(I,"class","absolute top-7 left-1 right-1 h-[360px] overflow-auto bg-slate-50 border border-blue-300"),Oe(I,"hidden",l[0]!=null),c(he,"class","w-[100px] shrink-0"),c($,"type","text"),c($,"class","w-full h-6 text-[11px] outline-none border border-blue-300 disabled:bg-slate-50"),c(_e,"class","grow"),c(ge,"class","w-[100px] shrink-0 flex flex-row justify-end "),c(Z,"class","absolute top-0 right-0 left-0 h-[35px] flex flex-row items-center"),c(me,"class","w-[100px] shrink-0"),c(pe,"class","w-[100px] shrink-0 flex flex-row justify-end "),c(ee,"class","absolute bottom-0 right-0 left-0 h-[35px] flex flex-row items-center justify-between"),c(re,"class","absolute bottom-1 right-1 left-1 h-[70px] text-[11px] text-black"),c(e,"class","absolute inset-0 bg-xp-yellow")},m(n,V){W(n,e,V),i(e,t),i(t,s),i(s,o),i(s,a),i(s,f),i(t,d),i(t,b),i(t,x),i(t,m),i(t,y),i(t,D),i(e,g),i(e,F);for(let B=0;B<C.length;B+=1)C[B].m(F,null);i(e,E),i(e,I),i(I,O),i(O,N),i(I,K),i(I,Y),i(I,ae);for(let B=0;B<j.length;B+=1)j[B].m(I,null);i(I,le),i(I,h),i(h,J),i(I,Ue),i(I,Ve),i(I,Le);for(let B=0;B<q.length;B+=1)q[B].m(I,null);i(I,Te),i(I,ue),i(ue,ze),i(I,Re),i(I,Se),i(I,je);for(let B=0;B<H.length;B+=1)H[B].m(I,null);i(e,qe),i(e,re),i(re,Z),i(Z,he),i(he,He),i(Z,Ae),i(Z,_e),i(_e,$),gt($,l[1]),i(Z,Je),i(Z,ge),De(ce,ge,null),i(re,Ke),i(re,ee),i(ee,me),i(me,Qe),i(ee,Xe),De(se,ee,null),i(ee,Ge),i(ee,pe),De(fe,pe,null),ie=!0,We||(lt=[R(o,"click",dl),R(o,"keyup",l[18]),R(b,"click",l[14]),R(m,"click",l[15]),R(D,"click",l[16]),R($,"input",l[23]),R($,"keyup",l[24])],We=!0)},p(n,V){if((!ie||V[0]&4096&&o.value!==n[12])&&(o.value=n[12]),(!ie||V[0]&1&&r!==(r="w-[17px] h-[17px] absolute top-[4px] left-[4px] bg-no-repeat "+(n[0]==null?"bg-[url(/images/xp/icons/MyComputer.png)]":"bg-[url(/images/xp/icons/FolderClosed.png)]")+" bg-contain"))&&c(f,"class",r),V[0]&1025&&G(f,"background-image",n[17](n[10][n[0]]),!1),(!ie||V[0]&512&&p!==(p=n[9]==0))&&(b.disabled=p),(!ie||V[0]&768&&_!==(_=n[9]==n[8].length-1))&&(m.disabled=_),(!ie||V[0]&768&&S!==(S=n[8][n[9]]==null))&&(D.disabled=S),V[0]&133152&&(Me=n[11],Nt(),C=jt(C,V,st,1,n,Me,U,F,qt,Dt,null,Et),Ut()),V[0]&1&&Oe(F,"hidden",n[0]==null),V[0]&8224){be=n[13].filter(Ct);let M;for(M=0;M<be.length;M+=1){const te=yt(n,be,M);j[M]?j[M].p(te,V):(j[M]=It(te),j[M].c(),j[M].m(I,le))}for(;M<j.length;M+=1)j[M].d(1);j.length=be.length}if(V[0]&8224){ve=n[13].filter(Pt);let M;for(M=0;M<ve.length;M+=1){const te=xt(n,ve,M);q[M]?q[M].p(te,V):(q[M]=Vt(te),q[M].c(),q[M].m(I,Te))}for(;M<q.length;M+=1)q[M].d(1);q.length=ve.length}if(V[0]&8224){ke=n[13].filter(Tt);let M;for(M=0;M<ke.length;M+=1){const te=wt(n,ke,M);H[M]?H[M].p(te,V):(H[M]=St(te),H[M].c(),H[M].m(I,null))}for(;M<H.length;M+=1)H[M].d(1);H.length=ke.length}V[0]&1&&Oe(I,"hidden",n[0]!=null),V[0]&2&&$.value!==n[1]&&gt($,n[1]);const B={};V[0]&64&&(B.on_click=n[6]),V[0]&3&&(B.disabled=n[1].length==0||n[0]==null),ce.$set(B);const de={};V[0]&16&&(de.items=n[4]),V[0]&24&&(de.selected_index=n[4].indexOf(n[3])>=0?n[4].indexOf(n[3]):0),se.$set(de);const Be={};V[0]&128&&(Be.on_click=n[7]),fe.$set(Be)},i(n){if(!ie){for(let V=0;V<Me.length;V+=1)ne(C[V]);ne(ce.$$.fragment,n),ne(se.$$.fragment,n),ne(fe.$$.fragment,n),ie=!0}},o(n){for(let V=0;V<C.length;V+=1)oe(C[V]);oe(ce.$$.fragment,n),oe(se.$$.fragment,n),oe(fe.$$.fragment,n),ie=!1},d(n){n&&u(e);for(let V=0;V<C.length;V+=1)C[V].d();Ce(j,n),Ce(q,n),Ce(H,n),Ie(ce),l[25](null),Ie(se),Ie(fe),We=!1,Ot(lt)}}}function Mt(l){return!0}const dl=l=>l.target.select(),Ct=l=>l.type=="folder",Pt=l=>l.type=="drive",Tt=l=>l.type=="removable_storage";function ul(l,e,t){let s,o,a;Ht(l,ll,h=>t(10,a=h)),At();let{id:f}=e,r=[f],d=0,b=Qt.map(h=>a[h]),{selected_filetype:p}=e,{filetypes:x=[]}=e,{filename:m=""}=e,{select_box:_}=e;function y(h){a[h]?.type=="file"||(t(8,r=[...r.slice(0,d+1),h]),t(9,d=r.length-1),t(0,f=r[d]))}function D(){t(9,d=Math.max(0,d-1)),t(0,f=r[d])}function S(){t(9,d=Math.min(r.length-1,d+1)),t(0,f=r[d])}function g(){let h=a[r[d]].parent;y(h)}function F(h){return h==null?null:h.icon!=null?`url(${h.icon})`:mt[h.ext]!=null?`url(/images/xp/icons/${mt[h.ext]})`:null}function C(h){if(h.key=="Enter"){let J=el(h.target.value);J==null&&(J=tl(h.target.value)),console.log("found id",J),J&&(y(J),h.target.blur())}}let{on_save:U=()=>{}}=e,{on_cancel:E=()=>{}}=e;const I=h=>y(h.id),O=h=>y(h.id),N=h=>y(h.id),K=h=>y(h.id);function Y(){m=this.value,t(1,m)}const ae=h=>{h.key=="Enter"&&f!=null&&m.length>0&&U()};function le(h){tt[h?"unshift":"push"](()=>{_=h,t(2,_)})}return l.$$set=h=>{"id"in h&&t(0,f=h.id),"selected_filetype"in h&&t(3,p=h.selected_filetype),"filetypes"in h&&t(4,x=h.filetypes),"filename"in h&&t(1,m=h.filename),"select_box"in h&&t(2,_=h.select_box),"on_save"in h&&t(6,U=h.on_save),"on_cancel"in h&&t(7,E=h.on_cancel)},l.$$.update=()=>{l.$$.dirty[0]&768&&t(12,s=$t(r[d])||"My Computer"),l.$$.dirty[0]&1025&&t(11,o=a[f]==null?[]:a[f].children.map(h=>a[h]).filter(h=>h!=null).filter(h=>!Xt.includes(h.id)))},[f,m,_,p,x,y,U,E,r,d,a,o,s,b,D,S,g,F,C,I,O,N,K,Y,ae,le]}class hl extends Ye{constructor(e){super(),Ze(this,e,ul,fl,$e,{id:0,selected_filetype:3,filetypes:4,filename:1,select_box:2,open:5,on_save:6,on_cancel:7},null,[-1,-1])}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),L()}get selected_filetype(){return this.$$.ctx[3]}set selected_filetype(e){this.$$set({selected_filetype:e}),L()}get filetypes(){return this.$$.ctx[4]}set filetypes(e){this.$$set({filetypes:e}),L()}get filename(){return this.$$.ctx[1]}set filename(e){this.$$set({filename:e}),L()}get select_box(){return this.$$.ctx[2]}set select_box(e){this.$$set({select_box:e}),L()}get open(){return this.$$.ctx[5]}get on_save(){return this.$$.ctx[6]}set on_save(e){this.$$set({on_save:e}),L()}get on_cancel(){return this.$$.ctx[7]}set on_cancel(e){this.$$set({on_cancel:e}),L()}}function Bt(l,e,t){const s=l.slice();return s[14]=e[t],s}function Ft(l){let e,t,s=`url(${l[14].icon})`,o,a,f=l[14].name+"",r,d,b,p;function x(){return l[10](l[14])}return{c(){e=v("div"),t=v("div"),o=P(),a=v("span"),r=Q(f),d=P(),this.h()},l(m){e=k(m,"DIV",{class:!0});var _=w(e);t=k(_,"DIV",{class:!0}),w(t).forEach(u),o=T(_),a=k(_,"SPAN",{class:!0});var y=w(a);r=X(y,f),y.forEach(u),d=T(_),_.forEach(u),this.h()},h(){c(t,"class","w-8 h-8 bg-contain bg-no-repeat"),G(t,"background-image",s,!1),c(a,"class","mt-1 text-[12px] text-black"),c(e,"class","w-full h-[80px] flex flex-col items-center p-2 hover:bg-slate-100 rounded")},m(m,_){W(m,e,_),i(e,t),i(e,o),i(e,a),i(a,r),i(e,d),b||(p=R(e,"click",x),b=!0)},p(m,_){l=m},d(m){m&&u(e),b=!1,p()}}}function _l(l){let e,t,s,o,a,f,r,d,b,p,x,m,_,y,D,S,g;s=new Kt({props:{options:{title:"Save",maximize_btn:!1,minimize_btn:!1},on_click_close:l[6]}});let F=l[8],C=[];for(let E=0;E<F.length;E+=1)C[E]=Ft(Bt(l,F,E));let U={id:l[4],filetypes:l[5],selected_filetype:l[1],on_save:l[11],on_cancel:l[6]};return y=new hl({props:U}),l[12](y),{c(){e=v("div"),t=v("div"),ye(s.$$.fragment),o=P(),a=v("div"),f=v("div"),r=v("div"),d=v("span"),b=Q("Look in:"),p=P(),x=v("div");for(let E=0;E<C.length;E+=1)C[E].c();m=P(),_=v("div"),ye(y.$$.fragment),this.h()},l(E){e=k(E,"DIV",{class:!0});var I=w(e);t=k(I,"DIV",{class:!0});var O=w(t);Ee(s.$$.fragment,O),o=T(O),a=k(O,"DIV",{class:!0});var N=w(a);f=k(N,"DIV",{class:!0});var K=w(f);r=k(K,"DIV",{class:!0});var Y=w(r);d=k(Y,"SPAN",{class:!0});var ae=w(d);b=X(ae,"Look in:"),ae.forEach(u),Y.forEach(u),p=T(K),x=k(K,"DIV",{class:!0});var le=w(x);for(let J=0;J<C.length;J+=1)C[J].l(le);le.forEach(u),K.forEach(u),m=T(N),_=k(N,"DIV",{class:!0});var h=w(_);Ee(y.$$.fragment,h),h.forEach(u),N.forEach(u),O.forEach(u),I.forEach(u),this.h()},h(){c(d,"class","text-[11px] text-black"),c(r,"class","h-7 mr-2 flex flex-row justify-end items-center"),c(x,"class","bg-xp-yellow-light shadow rounded w-full"),c(f,"class","absolute top-1 left-1 bottom-0 w-[100px]"),c(_,"class","absolute top-1 left-[110px] right-1 bottom-1"),c(a,"class","absolute inset-0 top-[28px] bg-xp-yellow shadow-lg border-t-0 border-2 border-blue-600"),c(t,"class","absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col"),G(t,"width","600px",!1),G(t,"height","500px",!1),c(e,"class","absolute inset-0 bg-slate-50/40 rounded-t-lg z-10")},m(E,I){W(E,e,I),i(e,t),De(s,t,null),i(t,o),i(t,a),i(a,f),i(f,r),i(r,d),i(d,b),i(f,p),i(f,x);for(let O=0;O<C.length;O+=1)C[O].m(x,null);i(a,m),i(a,_),De(y,_,null),D=!0,S||(g=R(e,"click",Jt(l[13])),S=!0)},p(E,[I]){if(I&257){F=E[8];let N;for(N=0;N<F.length;N+=1){const K=Bt(E,F,N);C[N]?C[N].p(K,I):(C[N]=Ft(K),C[N].c(),C[N].m(x,null))}for(;N<C.length;N+=1)C[N].d(1);C.length=F.length}const O={};I&16&&(O.id=E[4]),I&32&&(O.filetypes=E[5]),I&2&&(O.selected_filetype=E[1]),I&143&&(O.on_save=E[11]),y.$set(O)},i(E){D||(ne(s.$$.fragment,E),ne(y.$$.fragment,E),D=!0)},o(E){oe(s.$$.fragment,E),oe(y.$$.fragment,E),D=!1},d(E){E&&u(e),Ie(s),Ce(C,E),l[12](null),Ie(y),S=!1,g()}}}function gl(l,e,t){let{self:s}=e,{id:o}=e,{viewer:a}=e,{filetypes:f=[]}=e,{selected_filetype:r}=e,{filename:d}=e,{parent_id:b}=e,p=[{id:Wt,name:"Desktop",icon:"/images/xp/icons/Desktop.png"},{id:Yt,name:"My Pictures",icon:"/images/xp/icons/MyPictures.png"},{id:Zt,name:"My Music",icon:"/images/xp/icons/MyMusic.png"},{id:null,name:"My Computer",icon:"/images/xp/icons/MyComputer.png"}];function x(){console.log(s),s.$destroy()}let{on_save:m=()=>{}}=e;const _=g=>a.open(g.id),y=()=>{t(3,b=a.id),t(2,d=a.filename),t(1,r=a.select_box.items[a.select_box.selected_index]),console.log(r),m()};function D(g){tt[g?"unshift":"push"](()=>{a=g,t(0,a)})}const S=g=>{g.target.querySelector("div").classList.add("animate-blink"),setTimeout(()=>{g.target.querySelector("div").classList.remove("animate-blink")},400)};return l.$$set=g=>{"self"in g&&t(9,s=g.self),"id"in g&&t(4,o=g.id),"viewer"in g&&t(0,a=g.viewer),"filetypes"in g&&t(5,f=g.filetypes),"selected_filetype"in g&&t(1,r=g.selected_filetype),"filename"in g&&t(2,d=g.filename),"parent_id"in g&&t(3,b=g.parent_id),"on_save"in g&&t(7,m=g.on_save)},[a,r,d,b,o,f,x,m,p,s,_,y,D,S]}class Pl extends Ye{constructor(e){super(),Ze(this,e,gl,_l,$e,{self:9,id:4,viewer:0,filetypes:5,selected_filetype:1,filename:2,parent_id:3,destroy:6,on_save:7})}get self(){return this.$$.ctx[9]}set self(e){this.$$set({self:e}),L()}get id(){return this.$$.ctx[4]}set id(e){this.$$set({id:e}),L()}get viewer(){return this.$$.ctx[0]}set viewer(e){this.$$set({viewer:e}),L()}get filetypes(){return this.$$.ctx[5]}set filetypes(e){this.$$set({filetypes:e}),L()}get selected_filetype(){return this.$$.ctx[1]}set selected_filetype(e){this.$$set({selected_filetype:e}),L()}get filename(){return this.$$.ctx[2]}set filename(e){this.$$set({filename:e}),L()}get parent_id(){return this.$$.ctx[3]}set parent_id(e){this.$$set({parent_id:e}),L()}get destroy(){return this.$$.ctx[6]}get on_save(){return this.$$.ctx[7]}set on_save(e){this.$$set({on_save:e}),L()}}export{Pl as default};
