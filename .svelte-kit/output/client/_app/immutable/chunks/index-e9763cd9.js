function i(e){return new Promise((n,t)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>t(e.error)})}function f(e,n){let t;const o=()=>{if(t)return t;const r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(n),t=i(r),t.then(u=>{u.onclose=()=>t=void 0},()=>{}),t};return(r,u)=>o().then(d=>u(d.transaction(n,r).objectStore(n)))}let c;function a(){return c||(c=f("keyval-store","keyval")),c}function l(e,n=a()){return n("readonly",t=>i(t.get(e)))}function s(e,n,t=a()){return t("readwrite",o=>(o.put(n,e),i(o.transaction)))}export{l as g,s};
