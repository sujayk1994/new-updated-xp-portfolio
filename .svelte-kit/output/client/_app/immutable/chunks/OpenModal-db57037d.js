import{S as Il,i as Vl,s as Sl,X as A,l as h,a as F,r as G,w as Fe,m as _,n as m,c as B,h as f,u as Q,x as Be,p as c,q as fe,a2 as Oe,b as he,J as s,y as Ne,O as H,a1 as Ml,a0 as Nl,g as Cl,a8 as Ul,aa as jl,d as Pl,f as ue,t as de,U as Le,B as Ue,R as Tl,P as Ol,V as Ll,v as ql,E as cl,_ as zl}from"./index-59da92c8.js";import{T as Rl}from"./TitleBar-a503be9c.js";import"./lodash-b0811ec1.js";import{f as Al,h as Hl,i as ul,e as Kl,d as Jl,m as Xl,a as Gl}from"./system-e72d84b7.js";import{t as Ql,a as Wl,b as Yl}from"./finder-f715ee8c.js";import{h as Zl}from"./store-fabc0359.js";import{u as $l}from"./utils-1f7a3290.js";import"./fs-94169c0b.js";import{B as dl}from"./Button-5a8d2150.js";import{P as et}from"./Previewable-21087848.js";import"./_commonjsHelpers-cea7ac1a.js";import"./index-5377a032.js";import"./index-355ed6be.js";import"./admin-b2f51e94.js";/* empty css                                             */function fl(t,e,l){const i=t.slice();return i[31]=e[l],i}function hl(t,e,l){const i=t.slice();return i[31]=e[l],i}function _l(t,e,l){const i=t.slice();return i[31]=e[l],i}function pl(t,e,l){const i=t.slice();return i[31]=e[l],i}function lt(t){let e,l;return{c(){e=h("div"),this.h()},l(i){e=_(i,"DIV",{class:!0});var r=m(e);r.forEach(f),this.h()},h(){c(e,"class",l="w-[30px] h-[30px] shrink-0 bg-contain bg-no-repeat "+(t[31].type=="folder"?"bg-[url(/images/xp/icons/FolderClosed.png)]":"bg-[url(/images/xp/icons/Default.png)]")),fe(e,"background-image",t[20](t[31]),!1)},m(i,r){he(i,e,r)},p(i,r){r[0]&1024&&l!==(l="w-[30px] h-[30px] shrink-0 bg-contain bg-no-repeat "+(i[31].type=="folder"?"bg-[url(/images/xp/icons/FolderClosed.png)]":"bg-[url(/images/xp/icons/Default.png)]"))&&c(e,"class",l),r[0]&1024&&fe(e,"background-image",i[20](i[31]),!1)},i:cl,o:cl,d(i){i&&f(e)}}}function tt(t){let e,l;return e=new et({props:{size:30,default_icon:t[20](t[31]),fs_id:t[31].id}}),{c(){Fe(e.$$.fragment)},l(i){Be(e.$$.fragment,i)},m(i,r){Ne(e,i,r),l=!0},p(i,r){const o={};r[0]&1024&&(o.default_icon=i[20](i[31])),r[0]&1024&&(o.fs_id=i[31].id),e.$set(o)},i(i){l||(ue(e.$$.fragment,i),l=!0)},o(i){de(e.$$.fragment,i),l=!1},d(i){Ue(e,i)}}}function gl(t,e){let l,i,r,o,k,p,v=e[31].name+"",D,E,u,b,y,M,N,I;const K=[tt,lt],C=[];function V(d,w){return w[0]&1024&&(i=null),i==null&&(i=!!Kl.includes(d[31].ext)),i?0:1}r=V(e,[-1,-1]),o=C[r]=K[r](e);function ne(){return e[23](e[31])}function S(...d){return e[24](e[31],...d)}return{key:t,first:null,c(){l=h("div"),o.c(),k=F(),p=h("p"),D=G(v),u=F(),this.h()},l(d){l=_(d,"DIV",{"fs-id":!0,class:!0});var w=m(l);o.l(w),k=B(w),p=_(w,"P",{class:!0});var P=m(p);D=Q(P,v),P.forEach(f),u=B(w),w.forEach(f),this.h()},h(){c(p,"class",E="px-1 text-[11px] break-words line-clamp-2 text-ellipsis leading-tight "+(e[1]?.includes(e[31].id)?"bg-blue-600 text-slate-50":"")),c(l,"fs-id",b=e[31].id),c(l,"class",y="w-[100px] overflow-hidden m-2 inline-flex flex-row items-center font-MSSS relative "+(e[16](e[31])?"":"opacity-50")),this.first=l},m(d,w){he(d,l,w),C[r].m(l,null),s(l,k),s(l,p),s(p,D),s(l,u),M=!0,N||(I=[H(l,"dblclick",ne),H(l,"click",S)],N=!0)},p(d,w){e=d;let P=r;r=V(e,w),r===P?C[r].p(e,w):(Cl(),de(C[P],1,1,()=>{C[P]=null}),Pl(),o=C[r],o?o.p(e,w):(o=C[r]=K[r](e),o.c()),ue(o,1),o.m(l,k)),(!M||w[0]&1024)&&v!==(v=e[31].name+"")&&ql(D,v),(!M||w[0]&1026&&E!==(E="px-1 text-[11px] break-words line-clamp-2 text-ellipsis leading-tight "+(e[1]?.includes(e[31].id)?"bg-blue-600 text-slate-50":"")))&&c(p,"class",E),(!M||w[0]&1024&&b!==(b=e[31].id))&&c(l,"fs-id",b),(!M||w[0]&1024&&y!==(y="w-[100px] overflow-hidden m-2 inline-flex flex-row items-center font-MSSS relative "+(e[16](e[31])?"":"opacity-50")))&&c(l,"class",y)},i(d){M||(ue(o),M=!0)},o(d){de(o),M=!1},d(d){d&&f(l),C[r].d(),N=!1,Tl(I)}}}function ml(t){let e,l,i,r,o=(t[31].display_name!=null?t[31].display_name:t[31].name)+"",k,p,v;function D(){return t[25](t[31])}return{c(){e=h("div"),l=h("div"),i=F(),r=h("div"),k=G(o),this.h()},l(E){e=_(E,"DIV",{class:!0});var u=m(e);l=_(u,"DIV",{class:!0});var b=m(l);b.forEach(f),i=B(u),r=_(u,"DIV",{class:!0});var y=m(r);k=Q(y,o),y.forEach(f),u.forEach(f),this.h()},h(){c(l,"class","w-[40px] h-[40px] shrink-0 bg-[url(/images/xp/icons/FolderClosed.png)] bg-contain"),fe(l,"background-image",t[31].icon==null?"":`url(${t[31].icon})`,!1),c(r,"class","px-1 text-[11px] line-clamp-2 text-ellipsis leading-tight"),c(e,"class","w-[150px] ml-4 mr-8 overflow-hidden inline-flex flex-row items-center font-MSSS")},m(E,u){he(E,e,u),s(e,l),s(e,i),s(e,r),s(r,k),p||(v=H(e,"dblclick",D),p=!0)},p(E,u){t=E},d(E){E&&f(e),p=!1,v()}}}function vl(t){let e,l,i,r,o=(t[31].display_name!=null?t[31].display_name:t[31].name)+"",k,p,v;function D(){return t[26](t[31])}return{c(){e=h("div"),l=h("div"),i=F(),r=h("div"),k=G(o),this.h()},l(E){e=_(E,"DIV",{class:!0});var u=m(e);l=_(u,"DIV",{class:!0});var b=m(l);b.forEach(f),i=B(u),r=_(u,"DIV",{class:!0});var y=m(r);k=Q(y,o),y.forEach(f),u.forEach(f),this.h()},h(){c(l,"class","w-[50px] h-[50px] shrink-0 bg-[url(/images/xp/icons/LocalDisk.png)] bg-contain"),c(r,"class","px-1 text-[11px] line-clamp-2 text-ellipsis leading-tight"),c(e,"class","w-[150px] ml-4 mr-8 overflow-hidden inline-flex flex-row items-center font-MSSS")},m(E,u){he(E,e,u),s(e,l),s(e,i),s(e,r),s(r,k),p||(v=H(e,"dblclick",D),p=!0)},p(E,u){t=E},d(E){E&&f(e),p=!1,v()}}}function bl(t){let e,l,i,r,o=(t[31].display_name!=null?t[31].display_name:t[31].name)+"",k,p,v,D;function E(){return t[27](t[31])}return{c(){e=h("div"),l=h("div"),i=F(),r=h("div"),k=G(o),p=F(),this.h()},l(u){e=_(u,"DIV",{class:!0});var b=m(e);l=_(b,"DIV",{class:!0});var y=m(l);y.forEach(f),i=B(b),r=_(b,"DIV",{class:!0});var M=m(r);k=Q(M,o),M.forEach(f),p=B(b),b.forEach(f),this.h()},h(){c(l,"class","w-[50px] h-[50px] shrink-0 bg-[url(/images/xp/icons/RemovableMedia.png)] bg-contain"),c(r,"class","px-1 text-[11px] line-clamp-2 text-ellipsis leading-tight"),c(e,"class","w-[150px] ml-4 mr-8 overflow-hidden inline-flex flex-row items-center font-MSSS")},m(u,b){he(u,e,b),s(e,l),s(e,i),s(e,r),s(r,k),s(e,p),v||(D=H(e,"dblclick",E),v=!0)},p(u,b){t=u},d(u){u&&f(e),v=!1,D()}}}function st(t){let e,l,i,r,o,k,p,v,D,E,u,b,y,M,N,I,K,C,V=[],ne=new Map,S,d,w,P,R,W,re,ee,J,le,Ve,_e,a,U,te,Se,qe,Me,ze,Re,ae,Y,ge,Ae,He,me,se,Ce,Ke,ve,oe,Je,Z,be,Xe,Ge,ke,ie,Pe,Qe,we,ce,X,We,Ye,Te=t[10];const Ze=n=>n[31].id;for(let n=0;n<Te.length;n+=1){let g=pl(t,Te,n),T=Ze(g);ne.set(T,V[n]=gl(T,g))}let ye=t[13].filter(kl),O=[];for(let n=0;n<ye.length;n+=1)O[n]=ml(_l(t,ye,n));let xe=t[13].filter(wl),L=[];for(let n=0;n<xe.length;n+=1)L[n]=vl(hl(t,xe,n));let De=t[13].filter(yl),q=[];for(let n=0;n<De.length;n+=1)q[n]=bl(fl(t,De,n));return oe=new dl({props:{title:"Open",on_click:t[5],disabled:t[1].length==0}}),ce=new dl({props:{title:"Cancel",on_click:t[6]}}),{c(){e=h("div"),l=h("div"),i=h("div"),r=h("input"),o=F(),k=h("div"),v=F(),D=h("button"),u=F(),b=h("button"),M=F(),N=h("button"),K=F(),C=h("div");for(let n=0;n<V.length;n+=1)V[n].c();S=F(),d=h("div"),w=h("p"),P=G("Files Stored on This Computer"),R=F(),W=h("div"),re=F();for(let n=0;n<O.length;n+=1)O[n].c();ee=F(),J=h("p"),le=G("Hard Disk Drives"),Ve=F(),_e=h("div"),a=F();for(let n=0;n<L.length;n+=1)L[n].c();U=F(),te=h("p"),Se=G("Devices with Removable Storage"),qe=F(),Me=h("div"),ze=F();for(let n=0;n<q.length;n+=1)q[n].c();Re=F(),ae=h("div"),Y=h("div"),ge=h("div"),Ae=G("File name:"),He=F(),me=h("div"),se=h("input"),Ke=F(),ve=h("div"),Fe(oe.$$.fragment),Je=F(),Z=h("div"),be=h("div"),Xe=G("Files of type:"),Ge=F(),ke=h("div"),ie=h("input"),Qe=F(),we=h("div"),Fe(ce.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var g=m(e);l=_(g,"DIV",{class:!0});var T=m(l);i=_(T,"DIV",{class:!0});var pe=m(i);r=_(pe,"INPUT",{class:!0,type:!0}),o=B(pe),k=_(pe,"DIV",{class:!0});var x=m(k);x.forEach(f),pe.forEach(f),v=B(T),D=_(T,"BUTTON",{class:!0});var $=m(D);$.forEach(f),u=B(T),b=_(T,"BUTTON",{class:!0});var Fl=m(b);Fl.forEach(f),M=B(T),N=_(T,"BUTTON",{class:!0});var Bl=m(N);Bl.forEach(f),T.forEach(f),K=B(g),C=_(g,"DIV",{class:!0});var $e=m(C);for(let z=0;z<V.length;z+=1)V[z].l($e);$e.forEach(f),S=B(g),d=_(g,"DIV",{class:!0});var j=m(d);w=_(j,"P",{class:!0});var el=m(w);P=Q(el,"Files Stored on This Computer"),el.forEach(f),R=B(j),W=_(j,"DIV",{class:!0}),m(W).forEach(f),re=B(j);for(let z=0;z<O.length;z+=1)O[z].l(j);ee=B(j),J=_(j,"P",{class:!0});var ll=m(J);le=Q(ll,"Hard Disk Drives"),ll.forEach(f),Ve=B(j),_e=_(j,"DIV",{class:!0}),m(_e).forEach(f),a=B(j);for(let z=0;z<L.length;z+=1)L[z].l(j);U=B(j),te=_(j,"P",{class:!0});var tl=m(te);Se=Q(tl,"Devices with Removable Storage"),tl.forEach(f),qe=B(j),Me=_(j,"DIV",{class:!0}),m(Me).forEach(f),ze=B(j);for(let z=0;z<q.length;z+=1)q[z].l(j);j.forEach(f),Re=B(g),ae=_(g,"DIV",{class:!0});var je=m(ae);Y=_(je,"DIV",{class:!0});var Ee=m(Y);ge=_(Ee,"DIV",{class:!0});var sl=m(ge);Ae=Q(sl,"File name:"),sl.forEach(f),He=B(Ee),me=_(Ee,"DIV",{class:!0});var il=m(me);se=_(il,"INPUT",{type:!0,class:!0}),il.forEach(f),Ke=B(Ee),ve=_(Ee,"DIV",{class:!0});var nl=m(ve);Be(oe.$$.fragment,nl),nl.forEach(f),Ee.forEach(f),Je=B(je),Z=_(je,"DIV",{class:!0});var Ie=m(Z);be=_(Ie,"DIV",{class:!0});var rl=m(be);Xe=Q(rl,"Files of type:"),rl.forEach(f),Ge=B(Ie),ke=_(Ie,"DIV",{class:!0});var al=m(ke);ie=_(al,"INPUT",{type:!0,class:!0}),al.forEach(f),Qe=B(Ie),we=_(Ie,"DIV",{class:!0});var ol=m(we);Be(ce.$$.fragment,ol),ol.forEach(f),Ie.forEach(f),je.forEach(f),g.forEach(f),this.h()},h(){c(r,"class","absolute inset-0 w-[300px] pl-7 border border-blue-300 outline-none"),c(r,"type","text"),r.value=t[11],c(k,"class",p="w-[17px] h-[17px] absolute top-[4px] left-[4px] bg-no-repeat "+(t[0]==null?"bg-[url(/images/xp/icons/MyComputer.png)]":"bg-[url(/images/xp/icons/FolderClosed.png)]")+" bg-contain"),fe(k,"background-image",t[20](t[9][t[0]]),!1),c(i,"class","h-full w-[300px] relative"),c(D,"class","mx-1.5 ml-4 w-4 h-4 bg-[url(/images/xp/icons/Back.png)] bg-contain disabled:grayscale"),D.disabled=E=t[8]==0,c(b,"class","mx-1.5 w-4 h-4 bg-[url(/images/xp/icons/Forward.png)] bg-contain disabled:grayscale"),b.disabled=y=t[8]==t[7].length-1,c(N,"class","mx-1.5 w-5 h-5 bg-[url(/images/xp/icons/Up.png)] bg-contain disabled:grayscale"),N.disabled=I=t[7][t[8]]==null,c(l,"class","h-6 mb-2 flex flex-row items-center text-[11px]"),c(C,"class","w-full bg-slate-50 grow border overflow-auto border-blue-300"),Oe(C,"hidden",t[0]==null),c(w,"class","ml-2 mt-0.5 font-MSSS text-black text-[11px] font-bold"),c(W,"class","mb-4 w-[300px] h-[2px] bg-gradient-to-r from-blue-500 to-slate-50"),c(J,"class","ml-2 mt-4 font-MSSS text-black text-[11px] font-bold"),c(_e,"class","mb-4 w-[300px] h-[2px] bg-gradient-to-r from-blue-500 to-slate-50"),c(te,"class","ml-2 mt-4 font-MSSS text-black text-[11px] font-bold"),c(Me,"class","mb-4 w-[300px] h-[2px] bg-gradient-to-r from-blue-500 to-slate-50"),c(d,"class","w-full bg-slate-50 grow border overflow-auto border-blue-300"),Oe(d,"hidden",t[0]!=null),c(ge,"class","w-[100px] shrink-0"),se.disabled=!0,c(se,"type","text"),se.value=Ce=t[1].map(t[28]).join(", "),c(se,"class","w-full h-6 text-[11px] outline-none border border-blue-300 disabled:bg-slate-50"),c(me,"class","grow"),c(ve,"class","w-[100px] shrink-0 flex flex-row justify-end "),c(Y,"class","w-full flex flex-row items-center my-2"),c(be,"class","w-[100px] shrink-0"),ie.disabled=!0,c(ie,"type","text"),ie.value=Pe=t[2]+" ("+t[3].join(", ")+")",c(ie,"class","w-full h-6 p-0.5 text-[11px] outline-none border border-blue-300 disabled:bg-slate-50"),c(ke,"class","grow"),c(we,"class","w-[100px] shrink-0 flex flex-row justify-end "),c(Z,"class","w-full flex flex-row items-center my-2"),c(ae,"class","shrink-0 w-full h-[70px] text-[11px] text-black"),c(e,"class","absolute inset-0 overflow-auto bg-xp-yellow flex flex-col")},m(n,g){he(n,e,g),s(e,l),s(l,i),s(i,r),s(i,o),s(i,k),s(l,v),s(l,D),s(l,u),s(l,b),s(l,M),s(l,N),s(e,K),s(e,C);for(let T=0;T<V.length;T+=1)V[T].m(C,null);s(e,S),s(e,d),s(d,w),s(w,P),s(d,R),s(d,W),s(d,re);for(let T=0;T<O.length;T+=1)O[T].m(d,null);s(d,ee),s(d,J),s(J,le),s(d,Ve),s(d,_e),s(d,a);for(let T=0;T<L.length;T+=1)L[T].m(d,null);s(d,U),s(d,te),s(te,Se),s(d,qe),s(d,Me),s(d,ze);for(let T=0;T<q.length;T+=1)q[T].m(d,null);s(e,Re),s(e,ae),s(ae,Y),s(Y,ge),s(ge,Ae),s(Y,He),s(Y,me),s(me,se),s(Y,Ke),s(Y,ve),Ne(oe,ve,null),s(ae,Je),s(ae,Z),s(Z,be),s(be,Xe),s(Z,Ge),s(Z,ke),s(ke,ie),s(Z,Qe),s(Z,we),Ne(ce,we,null),X=!0,We||(Ye=[H(r,"click",it),H(r,"keyup",t[21]),H(D,"click",t[17]),H(b,"click",t[18]),H(N,"click",t[19]),H(C,"click",Ml(t[15])),Nl(t[12].call(null,e)),H(e,"click_outside",t[29])],We=!0)},p(n,g){if((!X||g[0]&2048&&r.value!==n[11])&&(r.value=n[11]),(!X||g[0]&1&&p!==(p="w-[17px] h-[17px] absolute top-[4px] left-[4px] bg-no-repeat "+(n[0]==null?"bg-[url(/images/xp/icons/MyComputer.png)]":"bg-[url(/images/xp/icons/FolderClosed.png)]")+" bg-contain"))&&c(k,"class",p),g[0]&513&&fe(k,"background-image",n[20](n[9][n[0]]),!1),(!X||g[0]&256&&E!==(E=n[8]==0))&&(D.disabled=E),(!X||g[0]&384&&y!==(y=n[8]==n[7].length-1))&&(b.disabled=y),(!X||g[0]&384&&I!==(I=n[7][n[8]]==null))&&(N.disabled=I),g[0]&1131538&&(Te=n[10],Cl(),V=Ul(V,g,Ze,1,n,Te,ne,C,jl,gl,null,pl),Pl()),g[0]&1&&Oe(C,"hidden",n[0]==null),g[0]&8208){ye=n[13].filter(kl);let x;for(x=0;x<ye.length;x+=1){const $=_l(n,ye,x);O[x]?O[x].p($,g):(O[x]=ml($),O[x].c(),O[x].m(d,ee))}for(;x<O.length;x+=1)O[x].d(1);O.length=ye.length}if(g[0]&8208){xe=n[13].filter(wl);let x;for(x=0;x<xe.length;x+=1){const $=hl(n,xe,x);L[x]?L[x].p($,g):(L[x]=vl($),L[x].c(),L[x].m(d,U))}for(;x<L.length;x+=1)L[x].d(1);L.length=xe.length}if(g[0]&8208){De=n[13].filter(yl);let x;for(x=0;x<De.length;x+=1){const $=fl(n,De,x);q[x]?q[x].p($,g):(q[x]=bl($),q[x].c(),q[x].m(d,null))}for(;x<q.length;x+=1)q[x].d(1);q.length=De.length}g[0]&1&&Oe(d,"hidden",n[0]!=null),(!X||g[0]&514&&Ce!==(Ce=n[1].map(n[28]).join(", "))&&se.value!==Ce)&&(se.value=Ce);const T={};g[0]&32&&(T.on_click=n[5]),g[0]&2&&(T.disabled=n[1].length==0),oe.$set(T),(!X||g[0]&12&&Pe!==(Pe=n[2]+" ("+n[3].join(", ")+")")&&ie.value!==Pe)&&(ie.value=Pe);const pe={};g[0]&64&&(pe.on_click=n[6]),ce.$set(pe)},i(n){if(!X){for(let g=0;g<Te.length;g+=1)ue(V[g]);ue(oe.$$.fragment,n),ue(ce.$$.fragment,n),X=!0}},o(n){for(let g=0;g<V.length;g+=1)de(V[g]);de(oe.$$.fragment,n),de(ce.$$.fragment,n),X=!1},d(n){n&&f(e);for(let g=0;g<V.length;g+=1)V[g].d();Le(O,n),Le(L,n),Le(q,n),Ue(oe),Ue(ce),We=!1,Tl(Ye)}}}const it=t=>t.target.select(),kl=t=>t.type=="folder",wl=t=>t.type=="drive",yl=t=>t.type=="removable_storage";function nt(t,e,l){let i,r,o;Ol(t,Zl,a=>l(9,o=a));const{click_outside:k}=$l;Ll();let p=[null],v=0,{id:D}=e,E=Al.map(a=>o[a]),{selectingItems:u=[]}=e,{filetypes_desc:b}=e,{filetypes:y=[]}=e,{multiple:M=!0}=e;function N(a,U){if(!K(U)||U.type!="file")return;let te=u.includes(U.id);(a.ctrlKey||a.metaKey)&&M?(console.log("ctrl key pressed"),te?l(1,u=u.filter(Se=>Se!=U.id)):l(1,u=[...u,U.id])):l(1,u=te?[]:[U.id])}function I(){console.log(u),console.log("clear_selection"),l(1,u=[])}function K(a){return a.type!="file"||y.length==0?!0:y.includes(a.ext)}function C(a){I(),o[a]?.type=="file"?(l(1,u=[a]),P()):(l(7,p=[...p.slice(0,v+1),a]),l(8,v=p.length-1),l(0,D=p[v]))}function V(){l(8,v=Math.max(0,v-1)),l(0,D=p[v])}function ne(){l(8,v=Math.min(p.length-1,v+1)),l(0,D=p[v])}function S(){let a=o[p[v]].parent;C(a)}function d(a){return a==null?null:a.icon!=null?`url(${a.icon})`:ul[a.ext]!=null?`url(/images/xp/icons/${ul[a.ext]})`:null}function w(a){if(a.key=="Enter"){let U=Wl(a.target.value);U==null&&(U=Yl(a.target.value)),console.log("found id",U),U&&(C(U),a.target.blur())}}let{on_open:P=()=>{}}=e,{on_cancel:R=()=>{}}=e;const W=a=>C(a.id),re=(a,U)=>N(U,a),ee=a=>C(a.id),J=a=>C(a.id),le=a=>C(a.id),Ve=a=>o[a].name,_e=()=>I();return t.$$set=a=>{"id"in a&&l(0,D=a.id),"selectingItems"in a&&l(1,u=a.selectingItems),"filetypes_desc"in a&&l(2,b=a.filetypes_desc),"filetypes"in a&&l(3,y=a.filetypes),"multiple"in a&&l(22,M=a.multiple),"on_open"in a&&l(5,P=a.on_open),"on_cancel"in a&&l(6,R=a.on_cancel)},t.$$.update=()=>{t.$$.dirty[0]&384&&l(11,i=Ql(p[v])||"My Computer"),t.$$.dirty[0]&513&&l(10,r=o[D]==null?[]:o[D].children.map(a=>o[a]).filter(a=>a!=null).filter(a=>!Hl.includes(a.id)))},[D,u,b,y,C,P,R,p,v,o,r,i,k,E,N,I,K,V,ne,S,d,w,M,W,re,ee,J,le,Ve,_e]}class rt extends Il{constructor(e){super(),Vl(this,e,nt,st,Sl,{id:0,selectingItems:1,filetypes_desc:2,filetypes:3,multiple:22,open:4,on_open:5,on_cancel:6},null,[-1,-1])}get id(){return this.$$.ctx[0]}set id(e){this.$$set({id:e}),A()}get selectingItems(){return this.$$.ctx[1]}set selectingItems(e){this.$$set({selectingItems:e}),A()}get filetypes_desc(){return this.$$.ctx[2]}set filetypes_desc(e){this.$$set({filetypes_desc:e}),A()}get filetypes(){return this.$$.ctx[3]}set filetypes(e){this.$$set({filetypes:e}),A()}get multiple(){return this.$$.ctx[22]}set multiple(e){this.$$set({multiple:e}),A()}get open(){return this.$$.ctx[4]}get on_open(){return this.$$.ctx[5]}set on_open(e){this.$$set({on_open:e}),A()}get on_cancel(){return this.$$.ctx[6]}set on_cancel(e){this.$$set({on_cancel:e}),A()}}function xl(t,e,l){const i=t.slice();return i[13]=e[l],i}function Dl(t){let e,l,i=`url(${t[13].icon})`,r,o,k=t[13].name+"",p,v,D,E;function u(){return t[9](t[13])}return{c(){e=h("div"),l=h("div"),r=F(),o=h("span"),p=G(k),v=F(),this.h()},l(b){e=_(b,"DIV",{class:!0});var y=m(e);l=_(y,"DIV",{class:!0}),m(l).forEach(f),r=B(y),o=_(y,"SPAN",{class:!0});var M=m(o);p=Q(M,k),M.forEach(f),v=B(y),y.forEach(f),this.h()},h(){c(l,"class","w-8 h-8 bg-contain bg-no-repeat"),fe(l,"background-image",i,!1),c(o,"class","mt-1 text-[12px] text-black"),c(e,"class","w-full h-[80px] flex flex-col items-center p-2 hover:bg-slate-100 rounded")},m(b,y){he(b,e,y),s(e,l),s(e,r),s(e,o),s(o,p),s(e,v),D||(E=H(e,"click",u),D=!0)},p(b,y){t=b},d(b){b&&f(e),D=!1,E()}}}function at(t){let e,l,i,r,o,k,p,v,D,E,u,b,y,M,N,I,K;i=new Rl({props:{options:{title:"Open",maximize_btn:!1,minimize_btn:!1},on_click_close:t[5]}});let C=t[7],V=[];for(let S=0;S<C.length;S+=1)V[S]=Dl(xl(t,C,S));let ne={filetypes_desc:t[3],filetypes:t[2].map(El),multiple:t[4],on_open:t[10],on_cancel:t[5]};return M=new rt({props:ne}),t[11](M),{c(){e=h("div"),l=h("div"),Fe(i.$$.fragment),r=F(),o=h("div"),k=h("div"),p=h("div"),v=h("span"),D=G("Look in:"),E=F(),u=h("div");for(let S=0;S<V.length;S+=1)V[S].c();b=F(),y=h("div"),Fe(M.$$.fragment),this.h()},l(S){e=_(S,"DIV",{class:!0});var d=m(e);l=_(d,"DIV",{class:!0});var w=m(l);Be(i.$$.fragment,w),r=B(w),o=_(w,"DIV",{class:!0});var P=m(o);k=_(P,"DIV",{class:!0});var R=m(k);p=_(R,"DIV",{class:!0});var W=m(p);v=_(W,"SPAN",{class:!0});var re=m(v);D=Q(re,"Look in:"),re.forEach(f),W.forEach(f),E=B(R),u=_(R,"DIV",{class:!0});var ee=m(u);for(let le=0;le<V.length;le+=1)V[le].l(ee);ee.forEach(f),R.forEach(f),b=B(P),y=_(P,"DIV",{class:!0});var J=m(y);Be(M.$$.fragment,J),J.forEach(f),P.forEach(f),w.forEach(f),d.forEach(f),this.h()},h(){c(v,"class","text-[11px] text-black"),c(p,"class","h-7 mr-2 flex flex-row justify-end items-center"),c(u,"class","bg-xp-yellow-light shadow rounded w-full"),c(k,"class","shrink-0 pt-1 pr-1 w-[100px]"),c(y,"class","grow flex flex-col relative"),c(o,"class","grow p-2 pb-1 bg-xp-yellow overflow-hidden flex flex-row shadow-lg border-t-0 border-2 border-blue-600"),c(l,"class","absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col"),fe(l,"width","600px",!1),fe(l,"height","500px",!1),c(e,"class","absolute inset-0 bg-slate-50/40 rounded-t-lg z-10")},m(S,d){he(S,e,d),s(e,l),Ne(i,l,null),s(l,r),s(l,o),s(o,k),s(k,p),s(p,v),s(v,D),s(k,E),s(k,u);for(let w=0;w<V.length;w+=1)V[w].m(u,null);s(o,b),s(o,y),Ne(M,y,null),N=!0,I||(K=H(e,"click",Ml(t[12])),I=!0)},p(S,[d]){if(d&130){C=S[7];let P;for(P=0;P<C.length;P+=1){const R=xl(S,C,P);V[P]?V[P].p(R,d):(V[P]=Dl(R),V[P].c(),V[P].m(u,null))}for(;P<V.length;P+=1)V[P].d(1);V.length=C.length}const w={};d&8&&(w.filetypes_desc=S[3]),d&4&&(w.filetypes=S[2].map(El)),d&16&&(w.multiple=S[4]),d&67&&(w.on_open=S[10]),M.$set(w)},i(S){N||(ue(i.$$.fragment,S),ue(M.$$.fragment,S),N=!0)},o(S){de(i.$$.fragment,S),de(M.$$.fragment,S),N=!1},d(S){S&&f(e),Ue(i),Le(V,S),t[11](null),Ue(M),I=!1,K()}}}const El=t=>t.toLowerCase();function ot(t,e,l){let{self:i}=e,{selected_items:r=[]}=e,{viewer:o}=e,{filetypes:k=[]}=e,{filetypes_desc:p="All Files"}=e,{multiple:v=!0}=e,D=[{id:Jl,name:"Desktop",icon:"/images/xp/icons/Desktop.png"},{id:Xl,name:"My Pictures",icon:"/images/xp/icons/MyPictures.png"},{id:Gl,name:"My Music",icon:"/images/xp/icons/MyMusic.png"},{id:null,name:"My Computer",icon:"/images/xp/icons/MyComputer.png"}];function E(){console.log(i),i.$destroy()}let{on_open:u=()=>{}}=e;const b=I=>o.open(I.id),y=()=>{l(0,r=o.selectingItems),u()};function M(I){zl[I?"unshift":"push"](()=>{o=I,l(1,o)})}const N=I=>{I.target.querySelector("div").classList.add("animate-blink"),setTimeout(()=>{I.target.querySelector("div").classList.remove("animate-blink")},400)};return t.$$set=I=>{"self"in I&&l(8,i=I.self),"selected_items"in I&&l(0,r=I.selected_items),"viewer"in I&&l(1,o=I.viewer),"filetypes"in I&&l(2,k=I.filetypes),"filetypes_desc"in I&&l(3,p=I.filetypes_desc),"multiple"in I&&l(4,v=I.multiple),"on_open"in I&&l(6,u=I.on_open)},[r,o,k,p,v,E,u,D,i,b,y,M,N]}class Dt extends Il{constructor(e){super(),Vl(this,e,ot,at,Sl,{self:8,selected_items:0,viewer:1,filetypes:2,filetypes_desc:3,multiple:4,destroy:5,on_open:6})}get self(){return this.$$.ctx[8]}set self(e){this.$$set({self:e}),A()}get selected_items(){return this.$$.ctx[0]}set selected_items(e){this.$$set({selected_items:e}),A()}get viewer(){return this.$$.ctx[1]}set viewer(e){this.$$set({viewer:e}),A()}get filetypes(){return this.$$.ctx[2]}set filetypes(e){this.$$set({filetypes:e}),A()}get filetypes_desc(){return this.$$.ctx[3]}set filetypes_desc(e){this.$$set({filetypes_desc:e}),A()}get multiple(){return this.$$.ctx[4]}set multiple(e){this.$$set({multiple:e}),A()}get destroy(){return this.$$.ctx[5]}get on_open(){return this.$$.ctx[6]}set on_open(e){this.$$set({on_open:e}),A()}}export{Dt as default};
