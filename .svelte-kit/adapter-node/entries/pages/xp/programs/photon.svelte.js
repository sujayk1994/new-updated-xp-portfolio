import{c as k,a as _,v as g,e as y,j as z}from"../../../../_app/immutable/chunks/index-ff400fad.js";import{W as b}from"../../../../_app/immutable/chunks/Window-e98aeb2f.js";import{h as D,z as N,r as W}from"../../../../_app/immutable/chunks/store-3e4ea696.js";import"../../../../_app/immutable/chunks/system-eda41220.js";import"short-uuid";import"../../../../_app/immutable/chunks/finder-762cc408.js";import"buffer";import{D as G}from"../../../../_app/immutable/chunks/DumbProgress-1d1763f5.js";import"../../../../_app/immutable/chunks/TitleBar-7840ae1a.js";import"lodash";import"idb-keyval";import"../../../../_app/immutable/chunks/index-2945f287.js";import"../../../../_app/immutable/chunks/ProgressBar-89c89d51.js";const Q=k((c,t,e,E)=>{let f,p,u;f=_(D,i=>i),u=_(N,i=>p=i);let{id:r}=t,{window:o}=t,{self:m}=t,{parentNode:v}=t,{fs_item:a}=t,{exec_path:d}=t,x=[{name:"Portable Network Graphics",mime:"image/png",value:"image/png",ext:".png"},{name:"JPEG images",mime:"image/jpeg",value:"image/jpeg",ext:".jpg"},{name:"JPEG images",mime:"image/jpeg",value:"image/jpeg",ext:".jpeg"},{name:"Windows OS/2 Bitmap Graphics",mime:"image/bmp",value:"image/bmp",ext:".bmp"}];x=x.map(i=>(i.name=i.name+" ("+i.ext+")",i));let P;async function s(){W.update(i=>i.filter(j=>j!=m)),m.$destroy()}let l={width:document.querySelector("#work-space").offsetWidth,height:document.querySelector("#work-space").offsetHeight},{options:n={title:a==null?"Photon Editor":a.name,min_width:500,min_height:400,width:Math.min(l.width-20,(l.height-20)*1.6),height:Math.min(l.height-20),icon:"/images/xp/icons/Photon.png",id:r,exec_path:d}}=t;t.id===void 0&&e.id&&r!==void 0&&e.id(r),t.window===void 0&&e.window&&o!==void 0&&e.window(o),t.self===void 0&&e.self&&m!==void 0&&e.self(m),t.parentNode===void 0&&e.parentNode&&v!==void 0&&e.parentNode(v),t.fs_item===void 0&&e.fs_item&&a!==void 0&&e.fs_item(a),t.exec_path===void 0&&e.exec_path&&d!==void 0&&e.exec_path(d),t.destroy===void 0&&e.destroy&&s!==void 0&&e.destroy(s),t.options===void 0&&e.options&&n!==void 0&&e.options(n);let h,w;do h=!0,a&&o&&o.update_title(a.name),w=`${g(b,"Window").$$render(c,{options:n,on_click_close:s,this:o},{this:i=>{o=i,h=!1}},{content:()=>`<div slot="content" class="absolute inset-0 flex flex-col bg-black">
        
        ${`<div class="absolute top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 text-slate-500 text-sm p-2 rounded font-mono">${g(G,"DumbProgress").$$render(c,{style:"width:150px;height:15px;"},{},{})}</div>`}
        
        <iframe src="/html/photon/app/index.html" width="100%" height="100%" class="${"inset-0 absolute bg-black "+y("opacity-0",!0)+" "+y(o?.z_index==p?"pointer-events-auto":"pointer-events-none",!0)}"${z("this",P,0)}></iframe></div>`})}

`;while(!h);return f(),u(),w});export{Q as default};
