import{c as T,a as V,v as l,j as L,e as W,h as j}from"../../../../_app/immutable/chunks/index-ff400fad.js";import{W as A}from"../../../../_app/immutable/chunks/Window-e98aeb2f.js";import{h as G,r as N,a as P}from"../../../../_app/immutable/chunks/store-3e4ea696.js";import{r as R,i as C}from"../../../../_app/immutable/chunks/system-eda41220.js";import{M as U}from"../../../../_app/immutable/chunks/Menu-9b4db4a8.js";import{R as d}from"../../../../_app/immutable/chunks/RButton-dd433362.js";import z from"./my_computer/viewer.svelte.js";import{t as H}from"../../../../_app/immutable/chunks/finder-762cc408.js";import I from"./my_computer/sidebar.svelte.js";import"../../../../_app/immutable/chunks/TitleBar-7840ae1a.js";import"lodash";import"idb-keyval";import"../../../../_app/immutable/chunks/index-2945f287.js";import"short-uuid";import"buffer";import"dragselect";import"../../../../_app/immutable/chunks/Previewable-3a8a83f0.js";import"hash-sum";import"../../../../_app/immutable/chunks/fs-8c49ae47.js";import"../../../../_app/immutable/chunks/utils-a62a4de9.js";import"../../../../_app/immutable/chunks/admin-04ad1b95.js";const pe=T((a,t,i,O)=>{let y,m,k;k=V(G,e=>m=e);let{id:v}=t,{window:r}=t,{self:s}=t,{exec_path:x}=t,{fs_item:g}=t,n=[g?.id],o=0,{viewer:p}=t,M=[{name:"File",items:[[{name:"Create Shortcut",disabled:!0}],[{name:"Close",action:()=>{u()}}]]},{name:"View",items:[[{name:"Toolbars"},{name:"Status Bar"},{name:"Explorer Bar"}],[{name:"Thumbnails"},{name:"Tiles"},{name:"Icons"},{name:"List"},{name:"Details"}],[{name:"Choose Details..."},{name:"Go To"},{name:"Refresh"}]]},{name:"Favorites",items:[[{name:"Add to Favorites..."},{name:"Organize Favorites"}],[{name:"Links",icon:"/images/xp/icons/FolderClosed.png"},{name:"MSN.com",icon:"/images/xp/icons/URL.png"},{name:"Radio Station Guide",icon:"/images/xp/icons/URL.png"}]]},{name:"Tools",items:[[{name:"Map Network Drive..."},{name:"Disconnect Network Drive..."},{name:"Synchronize..."}],[{name:"Folder Options..."}]]},{name:"Help",items:[[{name:"Help and Support Center",action:()=>b("https://docs.win32.run")},{name:"Is this copy legal?",action:()=>b("https://docs.win32.run")}],[{name:"About Windows",action:()=>b("https://docs.win32.run")}]]}];function u(){N.update(e=>e.filter(c=>c!=s)),s.$destroy()}let{options:h={title:"My Computer",min_width:500,min_height:400,width:700,height:500,icon:"/images/xp/icons/MyComputer.png",id:v,exec_path:x}}=t;function F(e){return e==null?null:e.icon!=null?`url(${e.icon})`:C[e.ext]!=null?`url(/images/xp/icons/${C[e.ext]})`:e.id==R?"url(/images/xp/icons/RecycleBinempty.png)":null}function w(e){e!=n[o]&&(console.log("open",e),console.log(m[e]),n=[...n.slice(0,o+1),e],o=n.length-1)}function S(){o=Math.max(0,o-1)}function D(){o=Math.min(n.length-1,o+1)}function _(){let e=m[n[o]].parent;w(e)}function b(e){P.set({path:"./programs/internet_explorer.svelte",fs_item:{url:e}})}t.id===void 0&&i.id&&v!==void 0&&i.id(v),t.window===void 0&&i.window&&r!==void 0&&i.window(r),t.self===void 0&&i.self&&s!==void 0&&i.self(s),t.exec_path===void 0&&i.exec_path&&x!==void 0&&i.exec_path(x),t.fs_item===void 0&&i.fs_item&&g!==void 0&&i.fs_item(g),t.viewer===void 0&&i.viewer&&p!==void 0&&i.viewer(p),t.destroy===void 0&&i.destroy&&u!==void 0&&i.destroy(u),t.options===void 0&&i.options&&h!==void 0&&i.options(h),t.open===void 0&&i.open&&w!==void 0&&i.open(w),t.up===void 0&&i.up&&_!==void 0&&i.up(_);let f,B;do{f=!0,y=H(n[o])||"My Computer";{let e=n[o];if(e==null)r?.update_icon("/images/xp/icons/MyComputer.png"),r?.update_title("My Computer");else if(e==R)r?.update_icon("/images/xp/icons/RecycleBinempty.png"),r?.update_title("Recycle Bin");else{let c=m[e];c&&(c.icon?r?.update_icon(c.icon):r?.update_icon("/images/xp/icons/FolderClosed.png"),r?.update_title(c.name))}}B=`${l(A,"Window").$$render(a,{options:h,on_click_close:u,this:r},{this:e=>{r=e,f=!1}},{content:()=>`<div slot="content" class="absolute inset-0.5 flex flex-col bg-xp-yellow overflow-hidden"><div class="shrink-0 w-full border-b border-stone-300 flex flex-row items-center justify-between">${l(U,"Menu").$$render(a,{menu:M},{},{})}
            <div class="w-[40px] h-full bg-slate-50 flex items-center justify-center"><div class="w-[20px] h-[20px] bg-[url(/images/ms.png)] bg-contain bg-center bg-no-repeat"></div></div></div>
        <div class="shrink-0 flex flex-row items-center border-b border-stone-300">${l(d,"RButton").$$render(a,{icon:"/images/xp/icons/Back.png",title:"Back",on_click:S,expandable:!0,disabled:o==0,tooltip_message:"Back to Previous"},{},{})}
            ${l(d,"RButton").$$render(a,{icon:"/images/xp/icons/Forward.png",on_click:D,expandable:!0,disabled:o==n.length-1},{},{})}

            ${l(d,"RButton").$$render(a,{icon:"/images/xp/icons/Up.png",on_click:_,disabled:n[o]==null},{},{})}

            <div class="w-[1px] h-full py-1"><div class="w-full h-full border-l border-stone-300"></div></div>

            ${l(d,"RButton").$$render(a,{icon:"/images/xp/icons/Search.png",title:"Search"},{},{})}
            ${l(d,"RButton").$$render(a,{icon:"/images/xp/icons/FolderView.png",title:"Folders"},{},{})}

            <div class="w-[1px] h-full py-1"><div class="w-full h-full border-l border-stone-300"></div></div>

            ${l(d,"RButton").$$render(a,{icon:"/images/xp/icons/FolderView-Classic.png",expandable:!0},{},{})}</div>
        <div class="shrink-0 flex flex-row items-center border-b border-stone-300 text-[11px] items-center"><span class="px-2 text-slate-800">Address</span>
            <div class="grow h-[25px] relative"><input class="absolute inset-0 pl-7 outline-none" type="text"${L("value",y,0)}>
                <div class="${"w-[17px] h-[17px] absolute top-[4px] left-[4px] "+W(n[o]==null?"bg-[url(/images/xp/icons/MyComputer.png)]":"bg-[url(/images/xp/icons/FolderClosed.png)]",!0)+" bg-contain"}"${j({"background-image":F(m[n[o]])})}></div></div>
            <div class="w-[30px] h-[20px] bg-[url(/images/xp/icons/Go.png)] bg-center bg-contain bg-no-repeat"></div></div>
        
        <div class="grow flex flex-row overflow-hidden">${l(I,"Sidebar").$$render(a,{my_computer_instance:s,id:n[o]},{},{})}
            <div class="grow relative bg-blue-100">${l(z,"Viewer").$$render(a,{self:p,id:n[o],my_computer_instance:s,this:p},{this:e=>{p=e,f=!1}},{})}</div></div></div>`})}


`}while(!f);return k(),B});export{pe as default};
