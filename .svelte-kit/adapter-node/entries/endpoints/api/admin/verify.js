import{v as p}from"../../../../_app/immutable/chunks/auth-e33c57ab.js";import{i as c}from"../../../../_app/immutable/chunks/db-aae5410a.js";import"bcrypt";import"jsonwebtoken";import"crypto";import"pg";let n=!1;async function u(){n||(await c(),n=!0)}async function j({request:i}){await u();const a=i.headers.get("cookie")||"",e=Object.fromEntries(a.split(";").map(s=>{const[o,...r]=s.trim().split("=");return[o,r.join("=")]})).admin_token;if(!e)return new Response(JSON.stringify({authenticated:!1}),{status:200,headers:{"Content-Type":"application/json"}});const t=p(e);return t?new Response(JSON.stringify({authenticated:!0,admin:{username:t.username}}),{status:200,headers:{"Content-Type":"application/json"}}):new Response(JSON.stringify({authenticated:!1}),{status:200,headers:{"Content-Type":"application/json"}})}export{j as GET};
